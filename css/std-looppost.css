/**
 * Standard Loop Post - Styles V2 (Refactored)
 * Provides styling for posts display, filtering controls, and responsive layout.
 * Refactored for improved maintainability, readability, and reliability using CSS variables.
 */

:root {
  /* Colors */
  --std-primary-color: #2463EB;
  --std-primary-color-dark: #1E40AF;
  --std-secondary-color: #FF9500;
  --std-secondary-color-dark: #8A3800; /* Used for mrdh text */
  --std-secondary-color-bg: #FFE4BE; /* Used for mrdh badge bg */
  --std-text-color: #333;
  --std-text-color-secondary: #666;
  --std-text-color-muted: #555;
  --std-link-color: var(--std-primary-color);
  --std-link-hover-color: var(--std-primary-color-dark);
  --std-border-color: #ddd;
  --std-border-color-light: rgba(0, 0, 0, 0.05);
  --std-border-color-medium: rgba(0, 0, 0, 0.1);
  --std-bg-color: white;
  --std-bg-color-alt: #f7f9fc;
  --std-bg-color-alt-even: #FAFBFF;
  --std-bg-color-hover: #f5f5f5;
  --std-bg-color-focus: #EBF2FD;
  --std-bg-color-skeleton: #eee;
  --std-bg-color-error: #fff5f5;
  --std-text-color-error: #d63031;
  --std-border-color-error: #ffdddd;
  --std-focus-outline-color: var(--std-primary-color);
  --std-badge-mrdh-bg: var(--std-secondary-color);
  --std-badge-mrdh-text: #47360b;
  --std-badge-msprr-bg: var(--std-primary-color);
  --std-badge-msprr-text: white;
  --std-badge-filter-mrdh-bg: #f5e7c8;
  --std-badge-filter-mrdh-text: #5a471c;
  --std-badge-filter-mrdh-active-bg: var(--std-secondary-color);
  --std-badge-filter-mrdh-active-text: var(--std-badge-mrdh-text);
  --std-badge-filter-msprr-bg: #ffe2c9;
  --std-badge-filter-msprr-text: #7d3a00;
  --std-badge-filter-msprr-active-bg: var(--std-primary-color);
  --std-badge-filter-msprr-active-text: white;
  --std-table-header-bg: #EBF2FD;
  --std-table-header-text: #1E429F;
  --std-table-docnum-bg: rgba(36, 99, 235, 0.05);
  --std-no-results-bg: #f8fafc;
  --std-no-results-text: var(--std-text-color-secondary);
  --std-no-results-border: #cbd5e1;
  --std-no-results-icon: #94A3B8;

  /* Taxonomy Colors */
  --std-term-std1-text: #4A5568;
  --std-term-std1-bg: #EDF2F7;
  --std-term-std2-text: #086F83;
  --std-term-std2-bg: #E6FFFA;
  --std-term-std3-text: var(--std-secondary-color-dark); /* มรด. */
  --std-term-std3-bg: var(--std-secondary-color-bg);
  --std-term-std4-text: #1A365D; /* มสพร. */
  --std-term-std4-bg: #EBF4FF;

  /* Typography */
  --std-font-family: 'Sarabun', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
  --std-base-font-size: 16px; /* Base for rem calculations */
  --std-font-size-sm: 0.875rem; /* 14px */
  --std-font-size-xs: 0.75rem;  /* 12px */
  --std-font-size-md: 1rem;    /* 16px */
  --std-font-size-lg: 1.1rem;  /* ~17.6px */
  --std-font-weight-normal: 400;
  --std-font-weight-medium: 500;
  --std-font-weight-semibold: 600;
  --std-line-height-base: 1.5;
  --std-line-height-tight: 1.3;
  --std-line-height-content: 1.6;

  /* Spacing */
  --std-spacing-xs: 4px;
  --std-spacing-sm: 8px;
  --std-spacing-md: 12px;
  --std-spacing-lg: 16px;
  --std-spacing-xl: 20px;
  --std-spacing-xxl: 30px;

  /* Borders */
  --std-border-radius-sm: 4px;
  --std-border-radius-md: 6px;
  --std-border-radius-lg: 8px;
  --std-border-width: 1px;
  --std-border-style: solid;

  /* Shadows */
  --std-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
  --std-shadow-md: 0 3px 10px rgba(0, 0, 0, 0.1);
  --std-shadow-lg: 0 5px 15px rgba(0, 0, 0, 0.15);
  --std-shadow-focus: 0 0 0 2px var(--std-focus-outline-color);

  /* Transitions */
  --std-transition-duration: 0.2s;
  --std-transition-duration-long: 0.3s;
  --std-transition-timing: ease;
  --std-transition-timing-in-out: ease-in-out;

  /* Z-Index */
  --std-z-index-badge: 10;
  --std-z-index-loading: 10;
  --std-z-index-loading-spinner: 11;
  --std-z-index-tooltip: 10;
  --std-z-index-tooltip-arrow: 9;

  /* Misc */
  --std-max-width: 1200px;
  --std-table-col-1-width: 250px;
}

/* Dark Mode Styles */
@media (prefers-color-scheme: dark) {
  :root {
    --std-primary-color: #60A5FA;
    --std-primary-color-dark: #3B82F6;
    --std-secondary-color: #FDBA74; /* Lighter orange for dark mode */
    --std-secondary-color-dark: #FFF6E0; /* Text for mrdh */
    --std-secondary-color-bg: #8A3800; /* Background for mrdh badge */
    --std-text-color: #E2E8F0;
    --std-text-color-secondary: #94A3B8;
    --std-text-color-muted: #CBD5E1;
    --std-link-color: var(--std-primary-color);
    --std-link-hover-color: var(--std-primary-color-dark);
    --std-border-color: #4B5563;
    --std-border-color-light: rgba(255, 255, 255, 0.05);
    --std-border-color-medium: rgba(255, 255, 255, 0.1);
    --std-bg-color: #1E293B;
    --std-bg-color-alt: #1E293B; /* Controls background */
    --std-bg-color-alt-even: #0F172A; /* Table even rows */
    --std-bg-color-hover: #2D3748; /* Table row hover */
    --std-bg-color-focus: #334155; /* Input focus bg */
    --std-bg-color-skeleton: #334155;
    --std-bg-color-error: #4A1D1D; /* Darker red bg */
    --std-text-color-error: #FCA5A5; /* Lighter red text */
    --std-border-color-error: #7F1D1D; /* Darker red border */
    --std-focus-outline-color: var(--std-primary-color);
    --std-badge-mrdh-bg: var(--std-secondary-color-bg);
    --std-badge-mrdh-text: var(--std-secondary-color-dark);
    --std-badge-msprr-bg: #1A365D; /* Darker blue for msprr */
    --std-badge-msprr-text: #EBF4FF;
    --std-badge-filter-mrdh-bg: #6B2B00; /* Darker filter badge bg */
    --std-badge-filter-mrdh-text: var(--std-secondary-color-dark);
    --std-badge-filter-mrdh-active-bg: var(--std-secondary-color-bg);
    --std-badge-filter-mrdh-active-text: var(--std-secondary-color-dark);
    --std-badge-filter-msprr-bg: #1E3A8A; /* Darker filter badge bg */
    --std-badge-filter-msprr-text: #DBEAFE;
    --std-badge-filter-msprr-active-bg: var(--std-badge-msprr-bg);
    --std-badge-filter-msprr-active-text: var(--std-badge-msprr-text);
    --std-table-header-bg: #1E40AF;
    --std-table-header-text: #BFDBFE;
    --std-table-docnum-bg: rgba(96, 165, 250, 0.1); /* Lighter blue alpha */
    --std-no-results-bg: #0F172A;
    --std-no-results-text: var(--std-text-color-secondary);
    --std-no-results-border: #334155;
    --std-no-results-icon: #64748b;

    /* Taxonomy Colors Dark */
    --std-term-std1-text: #E2E8F0;
    --std-term-std1-bg: #4A5568;
    --std-term-std2-text: #E6FFFA;
    --std-term-std2-bg: #086F83;
    --std-term-std3-text: var(--std-secondary-color-dark); /* มรด. */
    --std-term-std3-bg: var(--std-secondary-color-bg);
    --std-term-std4-text: var(--std-badge-msprr-text); /* มสพร. */
    --std-term-std4-bg: var(--std-badge-msprr-bg);
  }
}

/* Base Container */
.std-looppost-container {
  width: 100%;
  max-width: var(--std-max-width);
  margin: 0 auto;
  padding: var(--std-spacing-xl);
  font-family: var(--std-font-family);
  color: var(--std-text-color);
  /* Custom scrollbar for the container */
  scrollbar-width: thin;
  scrollbar-color: var(--std-primary-color) var(--std-table-header-bg); /* Use header bg for track */
}

.std-looppost-container::-webkit-scrollbar {
  width: var(--std-spacing-sm);
  height: var(--std-spacing-sm);
}

.std-looppost-container::-webkit-scrollbar-track {
  background: var(--std-table-header-bg);
  border-radius: var(--std-border-radius-sm);
}

.std-looppost-container::-webkit-scrollbar-thumb {
  background-color: var(--std-primary-color);
  border-radius: var(--std-border-radius-sm);
}

/* Controls Section */
.std-looppost-controls {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  gap: var(--std-spacing-lg);
  margin-bottom: var(--std-spacing-xxl);
  padding: var(--std-spacing-lg);
  background-color: var(--std-bg-color-alt);
  border-radius: var(--std-border-radius-lg);
  box-shadow: var(--std-shadow-sm);
}

.std-looppost-search-filter {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--std-spacing-lg);
  flex: 1; /* Take available space */
}

.std-looppost-search {
  flex: 1; /* Allow search to grow */
  min-width: 200px; /* Minimum width before wrapping */
}

.std-looppost-search-input {
  width: 100%;
  padding: var(--std-spacing-sm) var(--std-spacing-md); /* 10px 15px */
  border: var(--std-border-width) var(--std-border-style) var(--std-border-color);
  border-radius: var(--std-border-radius-sm);
  font-size: var(--std-font-size-sm);
  transition: border-color var(--std-transition-duration-long), box-shadow var(--std-transition-duration-long);
  background-color: var(--std-bg-color);
  color: var(--std-text-color);
}

.std-looppost-search-input:focus {
  border-color: var(--std-primary-color);
  outline: none;
  box-shadow: 0 0 0 1px var(--std-primary-color); /* Slimmer focus ring */
}

.std-looppost-filters {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--std-spacing-md);
}

/* Common Select Styles */
.std-looppost-year-filter select,
.std-looppost-sort select,
.std-looppost-taxonomy-select {
  padding: var(--std-spacing-sm) calc(var(--std-spacing-xxl) + var(--std-spacing-xs)) var(--std-spacing-sm) var(--std-spacing-md); /* 8px 30px 8px 12px */
  border: var(--std-border-width) var(--std-border-style) var(--std-border-color);
  border-radius: var(--std-border-radius-sm);
  font-size: var(--std-font-size-sm);
  background-color: var(--std-bg-color);
  color: var(--std-text-color);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' viewBox='0 0 10 6'%3E%3Cpath fill='%23666' d='M0 0h10L5 6z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right var(--std-spacing-md) center;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  cursor: pointer;
  transition: border-color var(--std-transition-duration), box-shadow var(--std-transition-duration);
  /* Custom scrollbar for dropdowns */
  scrollbar-width: thin;
  scrollbar-color: var(--std-primary-color) var(--std-bg-color-hover);
}

.std-looppost-year-filter select::-webkit-scrollbar,
.std-looppost-sort select::-webkit-scrollbar,
.std-looppost-taxonomy-select::-webkit-scrollbar {
  width: var(--std-spacing-sm);
}

.std-looppost-year-filter select::-webkit-scrollbar-track,
.std-looppost-sort select::-webkit-scrollbar-track,
.std-looppost-taxonomy-select::-webkit-scrollbar-track {
  background: var(--std-bg-color-hover);
}

.std-looppost-year-filter select::-webkit-scrollbar-thumb,
.std-looppost-sort select::-webkit-scrollbar-thumb,
.std-looppost-taxonomy-select::-webkit-scrollbar-thumb {
  background-color: var(--std-primary-color);
  border-radius: var(--std-border-radius-sm);
}

.std-looppost-year-filter select:hover,
.std-looppost-sort select:hover,
.std-looppost-taxonomy-select:hover {
  border-color: var(--std-primary-color);
}

.std-looppost-year-filter select:focus,
.std-looppost-sort select:focus,
.std-looppost-taxonomy-select:focus {
  border-color: var(--std-primary-color);
  outline: none;
  box-shadow: 0 0 0 1px var(--std-primary-color);
}

.std-looppost-taxonomy-select {
  min-width: 240px; /* Keep min-width for taxonomy */
  width: auto;
}

/* Custom Filter Badges */
.std-looppost-custom-filters {
  display: flex;
  gap: var(--std-spacing-sm);
  flex-wrap: wrap;
  align-items: center;
}

.std-looppost-filter-badge {
  padding: var(--std-spacing-xs) var(--std-spacing-sm); /* 5px 10px */
  border: none;
  border-radius: var(--std-border-radius-sm);
  background-color: var(--std-bg-color-skeleton); /* Default neutral */
  font-size: var(--std-font-size-xs);
  font-weight: var(--std-font-weight-semibold);
  cursor: pointer;
  transition: all var(--std-transition-duration);
}

.std-looppost-filter-badge:hover {
   transform: translateY(-1px);
}

/* Specific filter badge colors */
.std-looppost-filter-badge[data-filter="at_docnum_2"] { /* MRD */
  color: var(--std-badge-filter-mrdh-text);
  background-color: var(--std-badge-filter-mrdh-bg);
}
.std-looppost-filter-badge[data-filter="at_docnum_2"]:hover {
  background-color: #FFE7C2; /* Slightly lighter hover */
}
.std-looppost-filter-badge.active[data-filter="at_docnum_2"] {
  background-color: var(--std-badge-filter-mrdh-active-bg);
  color: var(--std-badge-filter-mrdh-active-text);
}

.std-looppost-filter-badge[data-filter="at_docnum_1"] { /* MSPRR */
  color: var(--std-badge-filter-msprr-text);
  background-color: var(--std-badge-filter-msprr-bg);
}
.std-looppost-filter-badge[data-filter="at_docnum_1"]:hover {
  background-color: #E1EFFE; /* Slightly lighter hover */
}
.std-looppost-filter-badge.active[data-filter="at_docnum_1"] {
  background-color: var(--std-badge-filter-msprr-active-bg);
  color: var(--std-badge-filter-msprr-active-text);
}

.std-looppost-filter-reset {
  padding: var(--std-spacing-xs) var(--std-spacing-sm);
  border: var(--std-border-width) var(--std-border-style) var(--std-border-color);
  border-radius: var(--std-border-radius-sm);
  background-color: var(--std-bg-color);
  color: var(--std-text-color);
  font-size: var(--std-font-size-xs);
  cursor: pointer;
  transition: all var(--std-transition-duration);
}

.std-looppost-filter-reset:hover {
  background-color: var(--std-bg-color-hover);
}

/* Sort & View Toggle */
.std-looppost-sort-view {
  display: flex;
  align-items: center;
  gap: var(--std-spacing-lg);
  margin-top: var(--std-spacing-lg); /* Default margin for smaller screens */
}

.std-looppost-view-toggle {
  display: flex;
  gap: var(--std-spacing-xs);
}

.std-looppost-view-btn {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: var(--std-border-width) var(--std-border-style) var(--std-border-color);
  border-radius: var(--std-border-radius-sm);
  background-color: var(--std-bg-color);
  color: var(--std-text-color);
  cursor: pointer;
  transition: all var(--std-transition-duration);
}

.std-looppost-view-btn:hover {
  background-color: var(--std-bg-color-focus);
  border-color: var(--std-primary-color);
}

.std-looppost-view-btn.active {
  background-color: var(--std-primary-color);
  color: white;
  border-color: var(--std-primary-color);
}

/* Posts Container Base */
.std-looppost-posts-container {
  margin-bottom: var(--std-spacing-xxl);
  transition: opacity var(--std-transition-duration-long) var(--std-transition-timing);
}

.std-looppost-posts-container.loading {
  opacity: 0.5;
}

/* Card View */
.std-looppost-posts-container.card-view {
  display: grid;
  grid-template-columns: repeat(1, 1fr);
  gap: var(--std-spacing-xl);
}

.card-view .std-looppost-item {
  display: flex;
  flex-direction: column;
  border-radius: var(--std-border-radius-lg);
  overflow: hidden;
  box-shadow: var(--std-shadow-md);
  transition: transform var(--std-transition-duration-long), box-shadow var(--std-transition-duration-long);
  background-color: var(--std-bg-color);
  height: 100%; /* Ensure cards in a row have same height */
  min-height: 450px; /* Maintain minimum height */
}

.card-view .std-looppost-item:hover {
  transform: translateY(-5px);
  box-shadow: var(--std-shadow-lg);
}

.card-view .std-looppost-image {
  height: 180px;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  position: relative; /* For badge positioning */
  transition: transform var(--std-transition-duration-long) var(--std-transition-timing-in-out);
}

.card-view .std-looppost-item:hover .std-looppost-image {
   transform: scale(1.05);
}

.card-view .std-looppost-content-wrapper {
  display: flex;
  flex-direction: column;
  padding: var(--std-spacing-lg);
  flex-grow: 1; /* Allow content to fill space */
}

.card-view .std-looppost-meta {
  display: flex;
  justify-content: space-between;
  font-size: var(--std-font-size-sm); /* Use rem */
  color: var(--std-text-color-secondary);
  margin-bottom: var(--std-spacing-sm);
}

.card-view .std-looppost-title {
  font-size: var(--std-font-size-lg);
  margin: 0 0 var(--std-spacing-sm) 0;
  font-weight: var(--std-font-weight-semibold);
  line-height: var(--std-line-height-tight);
  /* Clamp title to 2 lines */
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.card-view .std-looppost-title a {
  color: var(--std-link-color);
  text-decoration: none;
  transition: color var(--std-transition-duration);
}

.card-view .std-looppost-title a:hover {
  color: var(--std-link-hover-color);
  text-decoration: underline;
}

.card-view .std-looppost-excerpt {
  font-size: var(--std-font-size-sm); /* Use rem */
  color: var(--std-text-color-muted);
  margin-bottom: var(--std-spacing-lg);
  line-height: var(--std-line-height-base);
  /* Clamp excerpt to 5 lines */
  display: -webkit-box;
  -webkit-line-clamp: 5;
  -webkit-box-orient: vertical;
  overflow: hidden;
  flex-grow: 1; /* Push read more to bottom */
}

.card-view .std-looppost-read-more {
  margin-top: auto; /* Pushes button to the bottom */
}

.card-view .std-looppost-read-more-btn {
  display: inline-block;
  padding: var(--std-spacing-sm) var(--std-spacing-lg);
  background-color: var(--std-primary-color);
  color: white;
  text-decoration: none;
  border-radius: var(--std-border-radius-sm);
  font-size: var(--std-font-size-sm);
  transition: background-color var(--std-transition-duration);
}

.card-view .std-looppost-read-more-btn:hover {
  background-color: var(--std-primary-color-dark);
}

/* Table View */
.std-looppost-posts-container.table-view {
  display: flex;
  flex-direction: column;
  gap: var(--std-spacing-lg);
  font-family: var(--std-font-family);
  position: relative; /* For pseudo-element grid lines */
}

/* Subtle vertical grid lines for table view (desktop only) */
.table-view::before,
.table-view::after {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  width: 1px;
  background: var(--std-border-color-light);
  z-index: 0;
  pointer-events: none;
}
.table-view::before { left: calc(var(--std-table-col-1-width) + var(--std-spacing-xl)); } /* After first column */
.table-view::after { left: calc(var(--std-table-col-1-width) + 33.33% + var(--std-spacing-xl)); } /* Approximate position */


.std-looppost-table-row {
  background-color: var(--std-bg-color);
  border-radius: var(--std-border-radius-lg);
  box-shadow: var(--std-shadow-sm);
  overflow: hidden; /* Ensures border-radius applies */
  transition: all var(--std-transition-duration-long) var(--std-transition-timing);
  border-left: 4px solid var(--std-primary-color);
  position: relative; /* For hover effects and loading */
  cursor: pointer;
}

.std-looppost-table-row:nth-child(even) {
  background-color: var(--std-bg-color-alt-even);
}

.std-looppost-table-row:hover {
  box-shadow: var(--std-shadow-lg);
  transform: translateY(-2px);
  background-color: var(--std-bg-color-hover); /* Subtle hover background */
}

.std-looppost-table-row:active {
  transform: translateY(1px);
  transition: transform 0.1s;
  background-color: var(--std-bg-color-focus);
}

.std-looppost-table-row.active {
  border-left-color: var(--std-secondary-color);
  background-color: #FFF7ED; /* Specific active background */
}
@media (prefers-color-scheme: dark) {
  .std-looppost-table-row.active {
    background-color: #422006; /* Dark mode active background */
  }
}

/* Secondary hover indicator */
.std-looppost-table-row::after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  width: 4px;
  height: 100%;
  background-color: var(--std-secondary-color);
  opacity: 0;
  transition: opacity var(--std-transition-duration-long) var(--std-transition-timing);
}

.std-looppost-table-row:hover::after {
  opacity: 1;
}

.std-looppost-table-link {
  display: grid;
  /* Ensure grid-template-columns uses the variable and accounts for padding/borders */
  grid-template-columns: var(--std-table-col-1-width) 2fr 3fr;
  text-decoration: none;
  color: inherit;
}

.std-looppost-table-cell {
  padding: var(--std-spacing-lg) var(--std-spacing-xl);
  word-wrap: break-word;
  overflow-wrap: break-word; /* Ensure long words break */
  white-space: normal; /* Allow wrapping */
  display: flex;
  flex-direction: column;
  justify-content: center;
  border-right: var(--std-border-width) var(--std-border-style) var(--std-border-color-light); /* Subtle internal border */
}
.std-looppost-table-cell:last-child {
  border-right: none;
}

/* Document Number Cell */
.std-looppost-table-cell.doc-number-cell {
  width: var(--std-table-col-1-width); /* Fixed width */
  background-color: var(--std-table-docnum-bg);
  font-weight: var(--std-font-weight-semibold);
  flex-shrink: 0; /* Prevent shrinking */
  position: relative;
}

/* Document type indicator line */
.std-looppost-table-cell.doc-number-cell::before {
  content: "";
  display: block;
  width: 30px;
  height: 4px;
  background-color: var(--std-primary-color);
  border-radius: 2px;
  margin-bottom: var(--std-spacing-sm);
  transition: width var(--std-transition-duration-long) var(--std-transition-timing);
}
.std-looppost-table-cell.doc-number-cell.mrdh::before { /* If row has mrdh class */
  background-color: var(--std-secondary-color);
}
.std-looppost-table-row:hover .std-looppost-table-cell.doc-number-cell::before {
  width: 50px;
}

.doc-number {
  display: inline-block; /* Allows padding and background */
  padding: var(--std-spacing-sm) var(--std-spacing-md);
  border-radius: var(--std-border-radius-md);
  font-size: var(--std-font-size-sm);
  text-align: center;
  line-height: var(--std-line-height-tight);
  max-width: 100%; /* Prevent overflow */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap; /* Keep number on one line if possible */
}

.doc-number.mrdh { /* Style for the number itself if needed */
  background-color: var(--std-badge-mrdh-bg);
  color: var(--std-badge-mrdh-text);
}

.doc-number.msprr { /* Style for the number itself if needed */
  background-color: var(--std-badge-msprr-bg);
  color: var(--std-badge-msprr-text);
}

/* Title Cell */
.std-looppost-table-cell.title-cell .post-title {
  font-size: var(--std-font-size-lg);
  font-weight: var(--std-font-weight-semibold);
  color: var(--std-link-color);
  margin-bottom: var(--std-spacing-sm);
  line-height: var(--std-line-height-tight);
  transition: color var(--std-transition-duration);
}
.std-looppost-table-row:hover .std-looppost-table-cell.title-cell .post-title {
  color: var(--std-link-hover-color);
  text-decoration: underline;
}

.std-looppost-table-cell.title-cell .post-date {
  font-size: var(--std-font-size-sm);
  color: var(--std-text-color-secondary);
  display: flex;
  flex-wrap: wrap;
  gap: var(--std-spacing-md);
  letter-spacing: 0.01em; /* Improve date readability */
}

.publish-date, .modified-date {
  display: inline-flex;
  align-items: center;
}

.publish-date::before, .modified-date::before {
  content: "";
  display: inline-block;
  width: 14px;
  height: 14px;
  margin-right: var(--std-spacing-xs);
  background-size: contain;
  background-repeat: no-repeat;
}

.publish-date::before {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%232463EB' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='4' width='18' height='18' rx='2' ry='2'/%3E%3Cline x1='16' y1='2' x2='16' y2='6'/%3E%3Cline x1='8' y1='2' x2='8' y2='6'/%3E%3Cline x1='3' y1='10' x2='21' y2='10'/%3E%3C/svg%3E");
}

.modified-date::before {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23FF9500' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M12 2v10l4.24 4.24'/%3E%3Ccircle cx='12' cy='12' r='10'/%3E%3C/svg%3E");
}

/* Content Cell */
.std-looppost-table-cell.content-cell {
  font-size: 0.95rem; /* Slightly smaller than base */
  color: var(--std-text-color-muted);
  line-height: var(--std-line-height-content);
  position: relative; /* For tooltip */
  padding-right: var(--std-spacing-md); /* Ensure space from edge */
}

/* Empty cell styling */
.std-looppost-table-cell.empty {
  color: var(--std-text-color-secondary);
  font-style: italic;
}

/* Tooltip for truncated content */
.std-looppost-table-cell.content-cell[title] {
  cursor: help;
}

.std-looppost-table-cell.content-cell[title]:hover::before {
  content: attr(title);
  position: absolute;
  bottom: 100%; /* Position above the cell */
  left: 50%;
  transform: translateX(-50%) translateY(-var(--std-spacing-sm)); /* Move up slightly */
  padding: var(--std-spacing-sm) var(--std-spacing-md);
  background-color: #334155; /* Dark tooltip background */
  color: white;
  border-radius: var(--std-border-radius-sm);
  font-size: var(--std-font-size-sm);
  white-space: normal; /* Allow tooltip text to wrap */
  max-width: 300px;
  z-index: var(--std-z-index-tooltip);
  box-shadow: var(--std-shadow-lg);
  opacity: 0;
  animation: fadeIn 0.2s ease forwards;
  pointer-events: none; /* Prevent tooltip from interfering */
}

.std-looppost-table-cell.content-cell[title]:hover::after {
  content: "";
  position: absolute;
  bottom: calc(100% - var(--std-spacing-xs)); /* Position arrow */
  left: 50%;
  transform: translateX(-50%) rotate(45deg);
  width: 10px;
  height: 10px;
  background-color: #334155;
  z-index: var(--std-z-index-tooltip-arrow);
  opacity: 0;
  animation: fadeIn 0.2s ease forwards;
  pointer-events: none;
}

@keyframes fadeIn {
  to { opacity: 1; }
}


/* Table Header */
.std-looppost-table-header {
  display: grid; /* Use grid for alignment */
  grid-template-columns: var(--std-table-col-1-width) 2fr 3fr;
  padding: var(--std-spacing-sm) var(--std-spacing-xl);
  background-color: var(--std-table-header-bg);
  border-radius: var(--std-border-radius-md);
  font-weight: var(--std-font-weight-semibold);
  color: var(--std-table-header-text);
  margin-bottom: var(--std-spacing-md);
  font-size: var(--std-font-size-sm);
}
.std-looppost-table-header > div {
   padding: 0 var(--std-spacing-sm); /* Add some internal padding */
}


/* Taxonomy Badges */
.std-term-badge {
  display: inline-block;
  padding: var(--std-spacing-xs) var(--std-spacing-sm);
  border-radius: var(--std-border-radius-sm);
  font-size: var(--std-font-size-xs);
  font-weight: var(--std-font-weight-semibold);
}

/* Taxonomy Color Classes */
.std-term-std1 { color: var(--std-term-std1-text); background-color: var(--std-term-std1-bg); }
.std-term-std2 { color: var(--std-term-std2-text); background-color: var(--std-term-std2-bg); }
.std-term-std3 { color: var(--std-term-std3-text); background-color: var(--std-term-std3-bg); } /* มรด. */
.std-term-std4 { color: var(--std-term-std4-text); background-color: var(--std-term-std4-bg); } /* มสพร. */

/* Taxonomy Badges in Table */
.std-looppost-table-cell .taxonomy-badges {
  display: flex;
  flex-wrap: wrap;
  gap: var(--std-spacing-xs);
  margin-bottom: var(--std-spacing-sm); /* Space below badges */
}
.std-looppost-table-cell .taxonomy-badges .std-term-badge {
  margin-bottom: 0; /* Reset margin if inside wrapper */
}

/* Card View Badges (Positioned Absolute) */
.card-view .std-looppost-badge {
  position: absolute;
  top: var(--std-spacing-sm);
  right: var(--std-spacing-sm);
  padding: var(--std-spacing-xs) var(--std-spacing-sm);
  border-radius: var(--std-border-radius-sm);
  font-size: var(--std-font-size-xs);
  font-weight: var(--std-font-weight-semibold);
  z-index: var(--std-z-index-badge);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  max-width: 80%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  transition: transform var(--std-transition-duration) var(--std-transition-timing-in-out);
}

.card-view .std-looppost-item:hover .std-looppost-badge {
  transform: translateY(-2px);
}

/* Card View Specific Badge Colors (Overriding taxonomy colors for better contrast/design) */
.card-view .std-looppost-badge.std-term-std1 { background-color: #4A5568; color: white; }
.card-view .std-looppost-badge.std-term-std2 { background-color: #086F83; color: white; }
.card-view .std-looppost-badge.std-term-std3 { background-color: var(--std-badge-mrdh-bg); color: var(--std-badge-mrdh-text); } /* MRD */
.card-view .std-looppost-badge.std-term-std4 { background-color: var(--std-badge-msprr-bg); color: var(--std-badge-msprr-text); } /* MSPRR */

/* Ensure specific document type badges stack correctly in card view */
.card-view .std-looppost-badge.mrdh { /* If explicitly marked as mrdh */
  background-color: var(--std-badge-mrdh-bg);
  color: var(--std-badge-mrdh-text);
}
.card-view .std-looppost-badge.msprr { /* If explicitly marked as msprr */
  background-color: var(--std-badge-msprr-bg);
  color: var(--std-badge-msprr-text);
  top: calc(var(--std-spacing-sm) + 30px); /* Position below first badge */
}


/* Skeleton Loader */
.std-looppost-skeleton {
  display: none; /* Hidden by default, shown via JS */
}

.std-looppost-skeleton.active { /* Add .active class to show */
  display: block; /* Or grid/flex depending on context */
}

/* Skeleton Card View */
.card-view .std-looppost-skeleton {
  display: grid;
  grid-template-columns: repeat(1, 1fr);
  gap: var(--std-spacing-xl);
}

.card-view .std-looppost-skeleton-item {
  display: flex;
  flex-direction: column;
  height: 100%; /* Match card height */
  min-height: 450px; /* Match card min-height */
  border-radius: var(--std-border-radius-lg);
  overflow: hidden;
  background-color: var(--std-bg-color);
  box-shadow: var(--std-shadow-sm);
}

.std-looppost-skeleton-image {
  height: 180px; /* Match card image height */
  background-color: var(--std-bg-color-skeleton);
  animation: skeleton-pulse 1.5s infinite ease-in-out;
}

.card-view .std-looppost-skeleton-content {
  padding: var(--std-spacing-lg);
  flex-grow: 1;
}

.std-looppost-skeleton-meta {
  height: 15px;
  margin-bottom: var(--std-spacing-sm);
  background-color: var(--std-bg-color-skeleton);
  border-radius: var(--std-border-radius-sm);
  animation: skeleton-pulse 1.5s infinite ease-in-out;
  width: 60%;
}

.std-looppost-skeleton-title {
  height: 20px;
  margin-bottom: var(--std-spacing-sm);
  background-color: var(--std-bg-color-skeleton);
  border-radius: var(--std-border-radius-sm);
  animation: skeleton-pulse 1.5s infinite ease-in-out;
}

.std-looppost-skeleton-excerpt {
  height: 60px;
  margin-bottom: var(--std-spacing-lg);
  background-color: var(--std-bg-color-skeleton);
  border-radius: var(--std-border-radius-sm);
  animation: skeleton-pulse 1.5s infinite ease-in-out;
}

.std-looppost-skeleton-button {
  height: 35px;
  width: 100px;
  margin-top: auto; /* Push to bottom */
  background-color: var(--std-bg-color-skeleton);
  border-radius: var(--std-border-radius-sm);
  animation: skeleton-pulse 1.5s infinite ease-in-out;
}

/* Skeleton Table View */
.table-view .std-looppost-skeleton {
  display: flex;
  flex-direction: column;
  gap: var(--std-spacing-lg);
}

.std-looppost-skeleton-table-row {
  display: grid;
  grid-template-columns: var(--std-table-col-1-width) 2fr 3fr;
  height: 120px; /* Approximate row height */
  background-color: var(--std-bg-color);
  border-radius: var(--std-border-radius-lg);
  box-shadow: var(--std-shadow-sm);
  overflow: hidden;
  border-left: 4px solid #e5e7eb; /* Skeleton border color */
}

.std-looppost-skeleton-cell {
  padding: var(--std-spacing-lg);
  position: relative;
  overflow: hidden;
  border-right: var(--std-border-width) var(--std-border-style) var(--std-border-color-light);
}
.std-looppost-skeleton-cell:last-child {
  border-right: none;
}

/* Shimmer Effect */
.std-looppost-skeleton-cell::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(230, 230, 230, 0.5), transparent); /* Adjusted shimmer */
  background-size: 200% 100%;
  animation: shimmer 1.8s infinite linear; /* Slightly slower shimmer */
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes skeleton-pulse {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 0.8; }
}

/* Pagination */
.std-looppost-pagination {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--std-spacing-xl);
  margin-top: var(--std-spacing-xxl);
}

.std-looppost-load-more {
  padding: var(--std-spacing-sm) var(--std-spacing-xl);
  background-color: var(--std-primary-color);
  color: white;
  border: none;
  border-radius: var(--std-border-radius-md);
  font-size: var(--std-font-size-md);
  font-weight: var(--std-font-weight-medium);
  cursor: pointer;
  transition: all var(--std-transition-duration-long) var(--std-transition-timing);
}

.std-looppost-load-more:hover {
  background-color: var(--std-primary-color-dark);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(36, 99, 235, 0.2);
}

.std-looppost-load-more:active {
  transform: translateY(0);
}

.std-looppost-pagination-numbers {
  display: flex;
  gap: var(--std-spacing-xs);
  flex-wrap: wrap;
  justify-content: center;
}

.std-looppost-page-number {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 36px;
  height: 36px;
  padding: 0 var(--std-spacing-xs); /* Add horizontal padding for numbers */
  border-radius: var(--std-border-radius-sm);
  background-color: var(--std-bg-color-hover);
  color: var(--std-text-color);
  text-decoration: none;
  transition: all var(--std-transition-duration);
  font-weight: var(--std-font-weight-medium);
}

.std-looppost-page-number:hover {
  background-color: var(--std-border-color); /* Use border color for hover */
}

.std-looppost-page-number.current {
  background-color: var(--std-primary-color);
  color: white;
  border-color: var(--std-primary-color);
}

.std-looppost-page-number.dots {
  background-color: transparent;
  cursor: default;
  color: var(--std-text-color-secondary);
}

/* No Results */
.std-looppost-no-results {
  padding: var(--std-spacing-xxl);
  text-align: center;
  background-color: var(--std-no-results-bg);
  border-radius: var(--std-border-radius-lg);
  box-shadow: var(--std-shadow-sm);
  transition: all var(--std-transition-duration-long) var(--std-transition-timing);
}

.std-looppost-no-results p {
  font-size: var(--std-font-size-lg);
  color: var(--std-no-results-text);
  margin: 0;
}

/* Table view specific no-results */
.table-view .std-looppost-no-results {
  padding: 60px var(--std-spacing-xxl) var(--std-spacing-xxl); /* More top padding */
  font-size: var(--std-font-size-md);
  border: var(--std-border-width) dashed var(--std-no-results-border);
  position: relative;
}

.table-view .std-looppost-no-results::before {
  content: "";
  position: absolute;
  top: var(--std-spacing-xl);
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 40px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2394A3B8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'/%3E%3Cline x1='11' y1='8' x2='11' y2='14'/%3E%3Cline x1='8' y1='11' x2='14' y2='11'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  filter: grayscale(50%); /* Slightly desaturate icon */
}
@media (prefers-color-scheme: dark) {
  .table-view .std-looppost-no-results::before {
     filter: brightness(1.2); /* Make icon slightly brighter in dark mode */
  }
}


/* Error Message */
.std-looppost-error {
  padding: var(--std-spacing-xl);
  text-align: center;
  background-color: var(--std-bg-color-error);
  border: var(--std-border-width) var(--std-border-style) var(--std-border-color-error);
  border-radius: var(--std-border-radius-lg);
  color: var(--std-text-color-error);
  margin: var(--std-spacing-xl) 0;
}

/* Loading Animation (AJAX) */
.std-looppost-loading {
  position: relative; /* Container needs position */
}

.std-looppost-loading::after { /* Overlay */
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.7);
  display: flex; /* Needed for spinner alignment? No, spinner is positioned absolute */
  z-index: var(--std-z-index-loading);
}

.std-looppost-loading::before { /* Spinner */
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -20px; /* Half of height */
  margin-left: -20px; /* Half of width */
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 3px solid #f3f3f3; /* Light grey track */
  border-top: 3px solid var(--std-primary-color); /* Spinner color */
  animation: std-looppost-spin 1s linear infinite;
  z-index: var(--std-z-index-loading-spinner);
}

@keyframes std-looppost-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Loading state for table rows (Shine effect) */
.std-looppost-table-row.loading {
  position: relative;
  overflow: hidden; /* Important for shine effect */
}

.std-looppost-table-row.loading::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
  animation: loading-shine 1.6s infinite linear;
  z-index: 1; /* Above content but below hover effects */
}
@media (prefers-color-scheme: dark) {
  .std-looppost-table-row.loading::before {
     background: linear-gradient(90deg, transparent, rgba(51, 65, 85, 0.5), transparent); /* Dark mode shine */
  }
}


@keyframes loading-shine {
  0% { transform: translateX(-100%); }
  60%, 100% { transform: translateX(100%); }
}


/* New Item Animation */
.std-looppost-table-row.new {
  animation: fadeIn 0.5s ease forwards;
}


/* --- Accessibility & Focus --- */

/* General Focus Outline */
.std-looppost-search-input:focus,
.std-looppost-year-filter select:focus,
.std-looppost-sort select:focus,
.std-looppost-taxonomy-select:focus,
.std-looppost-filter-badge:focus,
.std-looppost-filter-reset:focus,
.std-looppost-view-btn:focus,
.std-looppost-load-more:focus,
.std-looppost-page-number:focus {
  outline: 2px solid var(--std-focus-outline-color);
  outline-offset: 2px;
  box-shadow: none; /* Remove inner shadow if focus outline is present */
}

/* Focus for Links/Clickable Rows */
.std-looppost-table-link:focus {
  outline: none; /* Remove default link outline */
}

.std-looppost-table-row:focus-within { /* Style row when child link is focused */
  box-shadow: var(--std-shadow-focus), var(--std-shadow-lg); /* Combine focus ring and hover shadow */
  outline: none;
}

/* Fallback for non-focus-within browsers or explicit focus on link */
.std-looppost-table-link:focus-visible {
  outline: 2px solid var(--std-focus-outline-color);
  outline-offset: -2px; /* Inset outline */
  border-radius: var(--std-border-radius-lg); /* Match row radius */
}

/* Keyboard navigation focus for table rows */
.std-looppost-table-row:focus-visible {
  outline: none;
  box-shadow: var(--std-shadow-focus), 0 4px 16px rgba(36, 99, 235, 0.2); /* Enhanced focus shadow */
}

/* Screen Reader Text (Example - apply where needed in HTML) */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* High Contrast Mode Support */
@media (forced-colors: active) {
  :root {
     /* Reset colors to system defaults */
     --std-primary-color: ButtonText;
     --std-primary-color-dark: ButtonText;
     --std-secondary-color: ButtonText;
     --std-text-color: CanvasText;
     --std-text-color-secondary: CanvasText;
     --std-text-color-muted: CanvasText;
     --std-link-color: LinkText;
     --std-link-hover-color: LinkText;
     --std-border-color: CanvasText;
     --std-bg-color: Canvas;
     --std-bg-color-alt: Canvas;
     --std-bg-color-alt-even: Canvas;
     --std-bg-color-hover: Highlight;
     --std-bg-color-focus: Highlight;
     --std-focus-outline-color: Highlight;
     --std-badge-mrdh-text: ButtonText;
     --std-badge-msprr-text: ButtonText;
     --std-table-header-bg: Canvas;
     --std-table-header-text: CanvasText;
     --std-table-docnum-bg: Canvas;
  }

  .std-looppost-filter-badge.active,
  .std-looppost-view-btn.active,
  .std-looppost-page-number.current {
    border: 2px solid HighlightText;
    background-color: Highlight;
    color: HighlightText;
    forced-color-adjust: none; /* Allow setting background/color */
  }

  .std-looppost-read-more-btn,
  .std-looppost-load-more,
  .std-looppost-filter-reset,
  .std-looppost-view-btn,
  .std-looppost-page-number {
    border: 1px solid ButtonText;
  }

  .std-looppost-table-row {
    border: 2px solid CanvasText;
    border-left-width: 4px; /* Keep left border prominent */
  }

  .doc-number {
    border: 1px solid CanvasText;
    background-color: Canvas; /* Ensure background is reset */
    color: CanvasText;
  }

  .std-looppost-search-input,
  .std-looppost-year-filter select,
  .std-looppost-sort select,
  .std-looppost-taxonomy-select {
     appearance: auto; /* Let system handle dropdown arrows */
     background-image: none;
     border: 1px solid CanvasText;
  }

  .std-looppost-skeleton-image,
  .std-looppost-skeleton-meta,
  .std-looppost-skeleton-title,
  .std-looppost-skeleton-excerpt,
  .std-looppost-skeleton-button,
  .std-looppost-skeleton-cell::after {
     background: transparent !important; /* Hide skeleton/shimmer */
     border: 1px dashed GrayText; /* Indicate loading area */
     animation: none !important;
  }
}

/* --- Responsiveness --- */

/* Medium Screens (Tablets) */
@media (min-width: 768px) {
  .std-looppost-sort-view {
    margin-top: 0; /* Remove top margin */
  }
}

/* Large Screens (Desktops) */
@media (min-width: 992px) {
  .card-view .std-looppost-posts-container.card-view,
  .card-view .std-looppost-skeleton {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* Smaller Screens (Tablets and below) */
@media (max-width: 992px) {
  /* Hide table header on smaller screens */
  .std-looppost-table-header {
    display: none;
  }

  /* Stack table cells vertically */
  .std-looppost-table-link {
    display: flex;
    flex-direction: column;
  }

  /* Make table cells full width */
  .std-looppost-table-cell {
    width: 100% !important; /* Override grid width */
    border-right: none !important; /* Remove vertical dividers */
  }

  /* Add horizontal dividers between stacked cells */
  .std-looppost-table-cell:not(:last-child) {
     border-bottom: var(--std-border-width) var(--std-border-style) var(--std-border-color-medium);
  }

  /* Adjust doc number cell styling */
  .std-looppost-table-cell.doc-number-cell {
    background-color: transparent; /* Remove specific background */
    border-bottom: var(--std-border-width) var(--std-border-style) var(--std-border-color-medium);
  }
  .std-looppost-table-cell.doc-number-cell::before {
     margin-bottom: var(--std-spacing-md); /* More space */
  }

  /* Hide pseudo grid lines */
  .table-view::before,
  .table-view::after {
    display: none;
  }

  /* Skeleton Table Row adjustments */
  .std-looppost-skeleton-table-row {
    display: flex;
    flex-direction: column;
    height: auto; /* Auto height */
  }
  .std-looppost-skeleton-cell {
     border-right: none;
     border-bottom: var(--std-border-width) var(--std-border-style) var(--std-border-color-light);
  }
   .std-looppost-skeleton-cell:last-child {
     border-bottom: none;
   }
}

/* Medium Screens (Tablets) */
@media (min-width: 576px) and (max-width: 991px) {
   .std-looppost-posts-container.card-view,
   .card-view .std-looppost-skeleton {
     grid-template-columns: repeat(2, 1fr);
   }
}

/* Small Screens (Mobiles) */
@media (max-width: 767px) { /* Adjusted breakpoint */
  .card-view .std-looppost-item {
    min-height: auto; /* Remove min-height on mobile */
  }
  .card-view .std-looppost-image {
    height: 160px; /* Slightly smaller image */
  }

  .std-looppost-controls {
    padding: var(--std-spacing-md); /* Less padding */
  }

  /* Make pagination numbers scrollable horizontally */
  .std-looppost-pagination-numbers {
    overflow-x: auto;
    justify-content: flex-start; /* Align left */
    max-width: 100%;
    padding-bottom: var(--std-spacing-xs); /* Space for scrollbar */
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    scrollbar-width: thin; /* Show scrollbar if needed */
    scrollbar-color: var(--std-border-color) transparent;
  }
  .std-looppost-pagination-numbers::-webkit-scrollbar {
     height: 4px;
  }
   .std-looppost-pagination-numbers::-webkit-scrollbar-thumb {
     background-color: var(--std-border-color);
     border-radius: 2px;
   }
}


/* Very Small Screens (Portrait Mobiles) */
@media (max-width: 575px) {
  .std-looppost-controls {
    flex-direction: column;
    align-items: stretch; /* Stretch items full width */
  }

  .std-looppost-search-filter {
    flex-direction: column;
    gap: var(--std-spacing-sm);
  }

  .std-looppost-filters {
    flex-direction: column;
    align-items: stretch;
    gap: var(--std-spacing-sm);
  }

  .std-looppost-custom-filters {
    flex-direction: column; /* Stack taxonomy and reset */
    width: 100%;
    gap: var(--std-spacing-sm);
  }

  .std-looppost-taxonomy-select {
    min-width: 100%;
    width: 100%;
  }

  .std-looppost-filter-reset {
    width: 100%;
    text-align: center;
  }

  .std-looppost-sort-view {
    justify-content: space-between; /* Space out sort and view toggle */
    width: 100%; /* Take full width */
  }

  .std-looppost-table-cell {
    padding: var(--std-spacing-md); /* Reduce padding */
  }

  .post-title {
    font-size: var(--std-font-size-md); /* Slightly smaller title */
  }

  .post-date {
    flex-direction: column; /* Stack dates */
    gap: var(--std-spacing-xs);
    align-items: flex-start;
  }

  .doc-number {
    font-size: var(--std-font-size-sm);
    padding: var(--std-spacing-xs) var(--std-spacing-sm);
  }
}

/* --- RTL Support --- */
.rtl .std-looppost-badge {
  right: auto;
  left: var(--std-spacing-sm);
}
.rtl .card-view .std-looppost-badge.msprr {
  top: calc(var(--std-spacing-sm) + 30px); /* Maintain stacking */
  right: auto;
  left: var(--std-spacing-sm);
}

.rtl .std-looppost-search-input {
  padding: var(--std-spacing-sm) var(--std-spacing-md); /* Keep padding consistent */
}

.rtl .std-looppost-year-filter select,
.rtl .std-looppost-sort select,
.rtl .std-looppost-taxonomy-select {
  background-position: left var(--std-spacing-md) center;
  padding: var(--std-spacing-sm) var(--std-spacing-md) var(--std-spacing-sm) calc(var(--std-spacing-xxl) + var(--std-spacing-xs));
}

.rtl .std-looppost-table-row {
  border-left: none;
  border-right: 4px solid var(--std-primary-color);
}
.rtl .std-looppost-table-row.active {
  border-right-color: var(--std-secondary-color);
}

.rtl .std-looppost-table-row::after { /* Hover indicator */
  right: auto;
  left: 0;
}

.rtl .std-looppost-table-cell {
   border-right: none;
   border-left: var(--std-border-width) var(--std-border-style) var(--std-border-color-light);
}
.rtl .std-looppost-table-cell:first-child { /* First cell (doc number) has no left border */
   border-left: none;
}
.rtl .std-looppost-table-cell:last-child { /* Last cell (content) gets the border */
   border-left: var(--std-border-width) var(--std-border-style) var(--std-border-color-light);
}

@media (max-width: 992px) {
   .rtl .std-looppost-table-cell {
      border-left: none !important; /* Remove internal borders when stacked */
   }
   .rtl .std-looppost-table-cell:not(:last-child) {
      border-bottom: var(--std-border-width) var(--std-border-style) var(--std-border-color-medium);
   }
}

.rtl .publish-date::before,
.rtl .modified-date::before {
  margin-right: 0;
  margin-left: var(--std-spacing-xs);
}

.rtl .std-looppost-table-cell.content-cell[title]:hover::before {
   /* Tooltip positioning might need minor adjustments in RTL */
}
.rtl .std-looppost-table-cell.content-cell[title]:hover::after {
   /* Tooltip arrow positioning might need minor adjustments in RTL */
}


/* --- Print Styles --- */
@media print {
  :root {
     /* Use print-friendly colors */
     --std-primary-color: black;
     --std-secondary-color: black;
     --std-text-color: black;
     --std-text-color-secondary: #333;
     --std-text-color-muted: #555;
     --std-link-color: black;
     --std-border-color: #ccc;
     --std-bg-color: white;
     --std-bg-color-alt: white;
     --std-bg-color-alt-even: white;
     --std-shadow-sm: none;
     --std-shadow-md: none;
     --std-shadow-lg: none;
  }

  body {
     font-size: 10pt; /* Adjust base font size for print */
  }

  .std-looppost-container {
     max-width: 100%;
     padding: 0;
  }

  .std-looppost-controls,
  .std-looppost-pagination,
  .std-looppost-read-more,
  .std-looppost-skeleton,
  .std-looppost-loading::before,
  .std-looppost-loading::after,
  .std-looppost-table-row::after, /* Hide hover indicators */
  .std-looppost-table-cell.doc-number-cell::before, /* Hide indicator lines */
  .std-looppost-table-cell.content-cell[title]::before, /* Hide tooltips */
  .std-looppost-table-cell.content-cell[title]::after {
    display: none !important;
  }

  .std-looppost-item,
  .std-looppost-table-row {
    break-inside: avoid;
    page-break-inside: avoid;
    margin-bottom: 15px;
    box-shadow: none;
    border: var(--std-border-width) var(--std-border-style) var(--std-border-color);
  }

  .std-looppost-table-row {
     border-left-width: 2px; /* Thinner border for print */
  }

  .std-looppost-image {
     height: 100px !important; /* Smaller images for print */
     -webkit-print-color-adjust: exact; /* Try to force background image printing */
     print-color-adjust: exact;
  }

  .card-view .std-looppost-excerpt {
     -webkit-line-clamp: unset; /* Show full excerpt */
  }

  .std-looppost-table-link {
     display: block; /* simpler display for print */
  }
  .std-looppost-table-cell {
     display: block; /* simpler display for print */
     border: none;
     padding: 5px 0;
  }
  .std-looppost-table-cell:not(:last-child) {
     border-bottom: 1px dotted #ccc;
  }

  a {
     text-decoration: none;
     color: black;
  }
  a[href]::after {
     content: " (" attr(href) ")"; /* Show URLs */
     font-size: 8pt;
     color: #555;
  }
}
